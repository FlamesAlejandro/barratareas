"use strict";var passport=require("passport"),LocalStrategy=require("passport-local").Strategy,Usuarios=require("../Models/Usuarios");passport.use(new LocalStrategy({usernameField:"email",passwordField:"password"},function(r,s,a){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Usuarios.findOne({where:{email:r,activo:1}}));case 3:if((t=e.sent).verificarPassword(s)){e.next=6;break}return e.abrupt("return",a(null,!1,{message:"Password es incorrecto"}));case 6:return e.abrupt("return",a(null,t));case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",a(null,!1,{message:"Esa cuenta no existe"}));case 12:case"end":return e.stop()}},null,null,[[0,9]])})),passport.serializeUser(function(e,r){r(null,e)}),passport.deserializeUser(function(e,r){r(null,e)}),module.exports=passport;