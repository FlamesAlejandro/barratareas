"use strict";function ownKeys(r,e){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),s.push.apply(s,o)}return s}function _objectSpread(r){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(s,!0).forEach(function(e){_defineProperty(r,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):ownKeys(s).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(s,e))})}return r}function _defineProperty(e,r,s){return r in e?Object.defineProperty(e,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[r]=s,e}var express=require("express"),routes=require("./routes"),path=require("path"),bodyParser=require("body-parser"),flash=require("connect-flash"),session=require("express-session"),cookieParser=require("cookie-parser"),passport=require("./config/passport"),helpers=require("./helpers"),db=require("./config/db");require("./models/Proyectos"),require("./models/Tareas"),require("./models/Usuarios"),db.sync().then(function(){return console.log("Conectado al db")}).catch(function(e){return console.log(e)});var app=express();app.use(bodyParser.urlencoded({extended:!0})),app.use(express.static("public")),app.set("view engine","pug"),app.set("views",path.join(__dirname,"./views")),app.use(flash()),app.use(cookieParser()),app.use(session({secret:"supersecreto",resave:!1,saveUninitialized:!1})),app.use(passport.initialize()),app.use(passport.session()),app.use(function(e,r,s){r.locals.vardump=helpers.vardump,r.locals.mensajes=e.flash(),r.locals.usuario=_objectSpread({},e.user)||null,s()}),app.use("/",routes()),app.listen(3e3),require("./handlers/email");