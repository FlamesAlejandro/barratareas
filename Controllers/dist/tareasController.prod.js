"use strict";var Proyectos=require("../Models/Proyectos"),Tareas=require("../Models/Tareas");exports.agregarTarea=function(r,a,t){var n,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Proyectos.findOne({where:{url:r.params.url}}));case 2:return n=e.sent,s=r.body.tarea,0,o=n.id,e.next=8,regeneratorRuntime.awrap(Tareas.create({tarea:s,estado:0,proyectoId:o}));case 8:if(e.sent){e.next=11;break}return e.abrupt("return",t());case 11:a.redirect("/proyectos/".concat(r.params.url));case 12:case"end":return e.stop()}})},exports.cambiarEstadoTarea=function(r,a){var t,n,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.params.id,e.next=3,regeneratorRuntime.awrap(Tareas.findOne({where:{id:t}}));case 3:return n=e.sent,s=0,n.estado===s&&(s=1),n.estado=s,e.next=9,regeneratorRuntime.awrap(n.save());case 9:if(e.sent){e.next=12;break}return e.abrupt("return",next());case 12:a.status(200).send("Actualizado");case 13:case"end":return e.stop()}})},exports.eliminarTarea=function(r,a){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.params.id,e.next=3,regeneratorRuntime.awrap(Tareas.destroy({where:{id:t}}));case 3:if(e.sent){e.next=6;break}return e.abrupt("return",next());case 6:a.status(200).send("Tarea eliminada correctamente");case 7:case"end":return e.stop()}})};